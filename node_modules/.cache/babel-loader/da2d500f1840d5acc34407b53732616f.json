{"ast":null,"code":"var _jsxFileName = \"D:\\\\trueapp\\\\true\\\\src\\\\componets\\\\Login\\\\Login.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport '../Login/Login.css';\nimport axios from 'axios';\nimport FlashMessage from 'react-flash-message';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fields: {},\n      errors: {},\n      email: '',\n      password: '',\n      msgdata: '',\n      msgcode: '',\n      redirectToReferrer: false\n    };\n    this.login = this.login.bind(this);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  login(e) {\n    e.preventDefault();\n\n    if (this.handleValidation()) {\n      //alert(\"Form submitted\");\n      if (this.state.email && this.state.password) {\n        let init = {\n          method: 'POST',\n          headers: {\n            'content-type': 'multipart/form-data'\n          },\n          mode: 'cors',\n          cache: 'default',\n          dataType: 'json',\n          type: 'POST',\n          async: true\n        };\n        const email = this.state.email;\n        const password = this.state.password;\n        let formData = new FormData();\n        formData.append('loginid', email);\n        formData.append('pass', password);\n        axios.post('https://idea.truebook.in/tps_api/index.php?view=login', formData, init).then(response => {\n          console.log(response.data);\n          sessionStorage.setItem('formData', JSON.stringify(response));\n          localStorage.setItem('formData', JSON.stringify(response)); //  const company_id = response.data.data.tpsData.company_id;\n          // alert( response.data.data.tpsData.email);\n\n          this.setState({\n            msgcode: response.data.msgcode\n          });\n\n          if (response.data.msgcode === 0) {\n            // alert(response.data.msgcode);\n            this.props.history.push(\"/dashboard\");\n          } else {// alert(\"Invalid username or Password\");\n          }\n        }).catch(err => {\n          console.log(err);\n          this.setState({\n            loading: false\n          });\n        });\n      }\n    } else {// alert(\"Form has errors.\")\n    }\n  }\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true; //Name\n\n    if (!fields[\"password\"]) {\n      formIsValid = false;\n      errors[\"password\"] = \"*Password is required\";\n    } //Email\n\n\n    if (!fields[\"email\"]) {\n      formIsValid = false;\n      errors[\"email\"] = \"*Email is required\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  contactSubmit(e) {\n    e.preventDefault();\n\n    if (this.handleValidation()) {\n      alert(\"Form submitted\");\n    } else {\n      alert(\"Form has errors.\");\n    }\n  }\n\n  onChange(field, e) {\n    let fields = this.state.fields;\n    fields[field] = e.target.value;\n    this.setState({\n      fields\n    });\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  render() {\n    const loginerror = React.createElement(FlashMessage, {\n      duration: 4000,\n      persistOnHover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"errorlogin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Ohh!\"), \" Invalid Username or Password..!!\"));\n    const login_success = React.createElement(FlashMessage, {\n      duration: 5000,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"sendmsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"sussessfully login\"));\n    return React.createElement(\"div\", {\n      className: \"login_main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flsmsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, this.state.msgcode === 1 ? loginerror : '', this.state.msgcode === 0 ? login_success : ''), React.createElement(\"div\", {\n      className: \"loginForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"hgroup\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"icon novi-icon icon-circle icon-bordered icon-lg icon-default fa fa-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"offset-top-24 text-darker big font-weight-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Login to your account\"), React.createElement(\"p\", {\n      class: \"text-extra-small text-dark offset-top-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Enter your credentials below\")))), React.createElement(\"form\", {\n      name: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      ref: \"email\",\n      type: \"text\",\n      name: \"email\",\n      className: \"temail\",\n      placeholder: \"Enter Email or Phone No\",\n      value: this.state.fields[\"email\"],\n      onChange: this.onChange.bind(this, \"email\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, this.state.errors[\"email\"])), React.createElement(\"div\", {\n      className: \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      ref: \"password\",\n      type: \"password\",\n      name: \"password\",\n      className: \"tpass\",\n      placeholder: \"Enter Password\",\n      value: this.state.fields[\"password\"],\n      onChange: this.onChange.bind(this, \"password\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, this.state.errors[\"password\"])), React.createElement(\"button\", {\n      onClick: this.login,\n      type: \"button\",\n      className: \"buttonui1 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \" Login \"), React.createElement(\"div\", {\n      className: \"ripples buttonRipples\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"ripplesCircle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"powered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Create New ? \", React.createElement(Link, {\n      to: \"/register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \" Register\")))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:\\trueapp\\true\\src\\componets\\Login\\Login.js"],"names":["React","Link","axios","FlashMessage","Login","Component","constructor","props","state","fields","errors","email","password","msgdata","msgcode","redirectToReferrer","login","bind","onChange","e","preventDefault","handleValidation","init","method","headers","mode","cache","dataType","type","async","formData","FormData","append","post","then","response","console","log","data","sessionStorage","setItem","JSON","stringify","localStorage","setState","history","push","catch","err","loading","formIsValid","contactSubmit","alert","field","target","value","name","render","loginerror","login_success","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../Login/Login.css';\r\nimport axios from 'axios';\r\nimport FlashMessage from 'react-flash-message'\r\n\r\n\r\n\r\n\r\nclass Login extends React.Component{\r\n  constructor(props){   \r\n    super(props);\r\n\r\n    this.state = {\r\n         fields: {},\r\n         errors: {},\r\n         email:'',\r\n         password:'',\r\n         msgdata:'',\r\n         msgcode:'',\r\n         redirectToReferrer: false\r\n    };\r\n    this.login = this.login.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n }\r\n\r\n \r\n\r\n login(e){\r\n  \r\n   e.preventDefault();\r\n   if(this.handleValidation()){\r\n      //alert(\"Form submitted\");\r\n      if(this.state.email && this.state.password){\r\n        let init = {\r\n           method: 'POST',\r\n           headers: { 'content-type': 'multipart/form-data' },\r\n           mode: 'cors',\r\n           cache: 'default',\r\n           dataType: 'json',\r\n           type:     'POST',\r\n           async:    true,\r\n         };\r\n  \r\n         const email= this.state.email\r\n         const password= this.state.password\r\n         \r\n         \r\n         let formData = new FormData();\r\n  \r\n         formData.append('loginid', email);\r\n         formData.append('pass', password);\r\n       \r\n         axios.post('https://idea.truebook.in/tps_api/index.php?view=login', formData,init)\r\n         .then(response => {\r\n           console.log(response.data);\r\n           sessionStorage.setItem('formData',JSON.stringify(response));\r\n           localStorage.setItem('formData',JSON.stringify(response));\r\n          //  const company_id = response.data.data.tpsData.company_id;\r\n            // alert( response.data.data.tpsData.email);\r\n            this.setState({\r\n              msgcode:response.data.msgcode\r\n            });\r\n\r\n           if(response.data.msgcode === 0){\r\n            // alert(response.data.msgcode);\r\n            this.props.history.push(\"/dashboard\");\r\n           }else{\r\n              // alert(\"Invalid username or Password\");\r\n          }\r\n           \r\n         })\r\n\r\n         .catch(err => {\r\n           console.log(err);\r\n           this.setState({\r\n             loading:false,\r\n           })\r\n         })\r\n        \r\n        \r\n        }\r\n\r\n   }\r\n  \r\n   else{ \r\n     // alert(\"Form has errors.\")\r\n   }\r\n\r\n   \r\n      \r\n }\r\n \r\n     \r\n handleValidation(){\r\n  let fields = this.state.fields;\r\n  let errors = {};\r\n  let formIsValid = true;\r\n\r\n  //Name\r\n   if(!fields[\"password\"]){\r\n      formIsValid = false;\r\n      errors[\"password\"] = \"*Password is required\";\r\n   }\r\n\r\n\r\n  //Email\r\n  if(!fields[\"email\"]){\r\n     formIsValid = false;\r\n     errors[\"email\"] = \"*Email is required\";\r\n  }\r\n  \r\n\r\n this.setState({errors: errors});\r\n return formIsValid;\r\n}\r\n\r\n\r\ncontactSubmit(e){\r\n  e.preventDefault();\r\n  if(this.handleValidation()){\r\n     alert(\"Form submitted\");\r\n  }else{ \r\n     alert(\"Form has errors.\")\r\n  }\r\n\r\n}\r\n\r\nonChange(field, e){         \r\n  let fields = this.state.fields;\r\n  fields[field] = e.target.value;        \r\n  this.setState({fields});\r\n  this.setState({[e.target.name]:e.target.value});\r\n}\r\n\r\n\r\n\r\n     \r\n    render() {\r\n    \r\n        const loginerror =  <FlashMessage duration={4000} persistOnHover={true}>\r\n        <span className=\"errorlogin\"><strong>Ohh!</strong> Invalid Username or Password..!!</span>\r\n          </FlashMessage>;\r\n            \r\n        const login_success =  <FlashMessage duration={5000}>\r\n        <span className=\"sendmsg\">sussessfully login</span>\r\n          </FlashMessage>; \r\n              \r\n            return (\r\n            <div className=\"login_main\">  \r\n           \r\n              <div className=\"login\">\r\n                    <div className=\"flsmsg\">\r\n                  \r\n                       {this.state.msgcode === 1 ? loginerror :''} \r\n                       {this.state.msgcode === 0 ?login_success : '' }     \r\n                   </div>\r\n                   <div className=\"loginForm\"> \r\n                        <hgroup>\r\n                        <div class=\"text-center\">\r\n                        <span class=\"icon novi-icon icon-circle icon-bordered icon-lg icon-default fa fa-user\"></span>\r\n                        <div>\r\n                            <div class=\"offset-top-24 text-darker big font-weight-bold\">Login to your account</div>\r\n                            <p class=\"text-extra-small text-dark offset-top-4\">Enter your credentials below</p>\r\n                        </div>\r\n                    </div>\r\n                        </hgroup>\r\n                        <form name=\"login\">\r\n                        <div className=\"group\">\r\n                    <input ref=\"email\" type=\"text\" name=\"email\" className=\"temail\" placeholder=\"Enter Email or Phone No\" \r\n                    value={this.state.fields[\"email\"]} onChange={this.onChange.bind(this, \"email\")}  />\r\n                     <span style={{color: \"red\"}}>{this.state.errors[\"email\"]}</span>\r\n             \r\n                        </div>\r\n\r\n\r\n                        <div className=\"group\">\r\n                            <input ref=\"password\" type=\"password\" name=\"password\" className=\"tpass\" placeholder=\"Enter Password\"\r\n               value={this.state.fields[\"password\"]} onChange={this.onChange.bind(this, \"password\")} /><span className=\"highlight\"></span><span className=\"bar\"></span>\r\n                          <span style={{color: \"red\"}}>{this.state.errors[\"password\"]}</span>\r\n                          \r\n                        </div>\r\n                        <button \r\n                        onClick={this.login} type=\"button\" className=\"buttonui1 \"> \r\n                        <span> Login </span>\r\n                         <div className=\"ripples buttonRipples\"><span className=\"ripplesCircle\"></span></div>\r\n                       </button>  \r\n                     \r\n                        </form>\r\n                        <div className=\"powered\">\r\n                        Create New ? <Link to=\"/register\" > Register</Link>\r\n                        </div>\r\n                    </div>\r\n              </div>\r\n            </div>\r\n            );\r\n          }\r\n}\r\n\r\n\r\n \r\nexport default Login;"]},"metadata":{},"sourceType":"module"}